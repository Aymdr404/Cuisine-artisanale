(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1934],{659:()=>{},1771:(e,r,t)=>{"use strict";t.d(r,{v:()=>p});var n=t(2115),a=t(71),i=t(1055),s=t(5751),o=t(2811);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,r,t){var n;return(n=function(e,r){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==l(n)?n:n+"")in e)?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var u=i.x.extend({defaultProps:{__TYPE:"Tag",value:null,severity:null,rounded:!1,icon:null,style:null,className:null,children:void 0},css:{classes:{value:"p-tag-value",icon:"p-tag-icon",root:function(e){var r=e.props;return(0,o.xW)("p-tag p-component",c(c({},"p-tag-".concat(r.severity),null!==r.severity),"p-tag-rounded",r.rounded))}},styles:"\n@layer primereact {\n    .p-tag {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    .p-tag-icon,\n    .p-tag-value,\n    .p-tag-icon.pi {\n        line-height: 1.5;\n    }\n    \n    .p-tag.p-tag-rounded {\n        border-radius: 10rem;\n    }\n}\n"}});function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}var p=n.forwardRef(function(e,r){var t=(0,s.qV)(),l=n.useContext(a.UM),p=u.getProps(e,l),m=u.setMetaData({props:p}),v=m.ptm,g=m.cx,y=m.isUnstyled;(0,i.j)(u.css.styles,y,{name:"tag"});var b=n.useRef(null),f=t({className:g("icon")},v("icon")),h=o.Hj.getJSXIcon(p.icon,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach(function(r){c(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},f),{props:p});n.useImperativeHandle(r,function(){return{props:p,getElement:function(){return b.current}}});var j=t({ref:b,className:(0,o.xW)(p.className,g("root")),style:p.style},u.getOtherProps(p),v("root")),x=t({className:g("value")},v("value"));return n.createElement("span",j,h,n.createElement("span",x,p.value),n.createElement("span",null,p.children))});p.displayName="Tag"},3620:(e,r,t)=>{Promise.resolve().then(t.bind(t,7791))},7623:()=>{},7791:(e,r,t)=>{"use strict";t.d(r,{default:()=>f});var n=t(5155),a=t(2115);t(7623);var i=t(8411),s=t(4333);t(659);var o=t(29),l=t(3050);let c=()=>{let[e,r]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"add-ingredient",children:[(0,n.jsx)(o.$,{label:"Ajouter un ingr\xe9dient",icon:"pi pi-plus",className:"p-button-success",onClick:()=>r(!0)}),(0,n.jsx)(l.A,{visible:e,onHide:()=>r(!1)})]})};var u=t(9708),d=t(5973),p=t(4547),m=t(4340),v=t(1771),g=t(2165),y=t(3769),b=t(4064);let f=()=>{let[e,r]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[f,h]=(0,a.useState)(""),{showToast:j}=(0,b.d)();(0,a.useEffect)(()=>{let e=(()=>{try{l(!0);let e=(0,u.P)((0,u.rJ)(d.db,"ingredients"),(0,u.My)("name","asc"));return(0,u.aQ)(e,e=>{let t=e.docs.map(e=>{var r,t,n,a;let i=e.data();return{name:i.name,price:i.price,unit:i.unit,category:null!=(n=i.category)?n:"",id:e.id,createdAt:null==(r=i.createdAt)?void 0:r.toDate(),updatedAt:null==(t=i.updatedAt)?void 0:t.toDate(),inStock:null==(a=i.inStock)||a}});r(t),l(!1)},e=>{console.error("Error getting ingredients:",e),j({severity:"error",summary:y.g.error.default,detail:"Impossible de charger les ingr\xe9dients"}),l(!1)})}catch(e){return console.error("Error in handleFetchIngredients:",e),l(!1),()=>{}}})();return()=>e()},[]);let x=async e=>{try{await (0,u.kd)((0,u.H9)(d.db,"ingredients",e)),j({severity:"success",summary:y.g.success.default,detail:y.g.success.delete})}catch(e){console.error("Erreur de suppression:",e),j({severity:"error",summary:y.g.error.default,detail:y.g.error.delete,life:3e3})}},S=async e=>{try{let{newValue:r,field:t,rowData:n}=e;await (0,u.mZ)((0,u.H9)(d.db,"ingredients",n.id),{[t]:r,updatedAt:new Date}),j({severity:"success",summary:"Succ\xe8s",detail:"Ingr\xe9dient mis \xe0 jour avec succ\xe8s",life:3e3})}catch(e){console.error("Erreur de mise \xe0 jour:",e),j({severity:"error",summary:"Erreur",detail:"Impossible de mettre \xe0 jour l'ingr\xe9dient",life:3e3})}},k=async e=>{try{await (0,u.mZ)((0,u.H9)(d.db,"ingredients",e.id),{inStock:!e.inStock,updatedAt:new Date}),j({severity:"success",summary:"Succ\xe8s",detail:"Ingr\xe9dient marqu\xe9 comme ".concat(e.inStock?"en rupture":"en stock"),life:3e3})}catch(e){console.error("Erreur de mise \xe0 jour du stock:",e),j({severity:"error",summary:"Erreur",detail:"Impossible de mettre \xe0 jour le stock",life:3e3})}},E=(0,n.jsxs)("div",{className:"table-header",children:[(0,n.jsx)("h2",{children:"Gestion des Ingr\xe9dients"}),(0,n.jsxs)("div",{className:"table-header-actions",children:[(0,n.jsxs)("span",{className:"p-input-icon-left",children:[(0,n.jsx)("i",{className:"pi pi-search"}),(0,n.jsx)(m.S,{value:f,onChange:e=>h(e.target.value),placeholder:"Rechercher..."})]}),(0,n.jsx)(c,{})]})]}),N=(e,r)=>{var t;return(null==(t=e[r])?void 0:t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))||"-"};return(0,n.jsxs)("div",{className:"ingredients-admin",children:[(0,n.jsx)(p.T,{}),(0,n.jsx)("div",{className:"table-container",children:(0,n.jsxs)(i.b,{value:e,paginator:!0,rows:10,loading:t,globalFilter:f,header:E,editMode:"cell",className:"ingredients-table",emptyMessage:"Aucun ingr\xe9dient trouv\xe9",responsiveLayout:"scroll",showGridlines:!0,stripedRows:!0,children:[(0,n.jsx)(s.V,{field:"name",header:"Nom",sortable:!0,editor:e=>(0,n.jsx)(m.S,{value:e.value,onChange:r=>{var t;return null==(t=e.editorCallback)?void 0:t.call(e,r.target.value)}}),onCellEditComplete:S}),(0,n.jsx)(s.V,{field:"price",header:"Prix",sortable:!0,body:e=>"".concat(e.price.toFixed(2)," â‚¬"),editor:e=>(0,n.jsx)(g.Y,{value:e.value,onValueChange:r=>{var t;return null==(t=e.editorCallback)?void 0:t.call(e,r.value)},mode:"currency",currency:"EUR",locale:"fr-FR",minFractionDigits:2}),onCellEditComplete:S}),(0,n.jsx)(s.V,{field:"unit",header:"Unit\xe9",sortable:!0,editor:e=>(0,n.jsx)(m.S,{value:e.value,onChange:r=>{var t;return null==(t=e.editorCallback)?void 0:t.call(e,r.target.value)}}),onCellEditComplete:S}),(0,n.jsx)(s.V,{field:"inStock",header:"Stock",sortable:!0,body:e=>(0,n.jsx)(v.v,{value:e.inStock?"En stock":"Rupture",severity:e.inStock?"success":"danger",onClick:()=>k(e),style:{cursor:"pointer"}})}),(0,n.jsx)(s.V,{field:"createdAt",header:"Cr\xe9\xe9 le",sortable:!0,body:e=>N(e,"createdAt")}),(0,n.jsx)(s.V,{field:"updatedAt",header:"Modifi\xe9 le",sortable:!0,body:e=>N(e,"updatedAt")}),(0,n.jsx)(s.V,{body:e=>(0,n.jsx)("div",{className:"action-buttons",children:(0,n.jsx)(o.$,{icon:"pi pi-trash",className:"p-button-rounded p-button-danger p-button-text",onClick:()=>{var r,t;return r=e.id,t=e.name,void(0,p.Z)({message:"\xcates-vous s\xfbr de vouloir supprimer l'ingr\xe9dient \"".concat(t,'" ?'),header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Oui",rejectLabel:"Non",accept:()=>x(r)})},tooltip:"Supprimer"})}),header:"Actions",style:{width:"100px"}})]})})]})}}},e=>{e.O(0,[3379,8472,9844,2992,9895,9657,4797,1055,8296,29,6946,8574,3640,1056,2165,2571,1139,3050,8441,1255,7358],()=>e(e.s=3620)),_N_E=e.O()}]);