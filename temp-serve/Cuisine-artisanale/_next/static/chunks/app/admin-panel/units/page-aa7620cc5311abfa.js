(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1265],{161:()=>{},1495:()=>{},1771:(e,r,t)=>{"use strict";t.d(r,{v:()=>p});var a=t(2115),s=t(71),i=t(1055),n=t(5751),l=t(2811);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,r,t){var a;return(a=function(e,r){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=o(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==o(a)?a:a+"")in e)?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var u=i.x.extend({defaultProps:{__TYPE:"Tag",value:null,severity:null,rounded:!1,icon:null,style:null,className:null,children:void 0},css:{classes:{value:"p-tag-value",icon:"p-tag-icon",root:function(e){var r=e.props;return(0,l.xW)("p-tag p-component",c(c({},"p-tag-".concat(r.severity),null!==r.severity),"p-tag-rounded",r.rounded))}},styles:"\n@layer primereact {\n    .p-tag {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    .p-tag-icon,\n    .p-tag-value,\n    .p-tag-icon.pi {\n        line-height: 1.5;\n    }\n    \n    .p-tag.p-tag-rounded {\n        border-radius: 10rem;\n    }\n}\n"}});function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}var p=a.forwardRef(function(e,r){var t=(0,n.qV)(),o=a.useContext(s.UM),p=u.getProps(e,o),m=u.setMetaData({props:p}),v=m.ptm,b=m.cx,f=m.isUnstyled;(0,i.j)(u.css.styles,f,{name:"tag"});var y=a.useRef(null),h=t({className:b("icon")},v("icon")),g=l.Hj.getJSXIcon(p.icon,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach(function(r){c(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},h),{props:p});a.useImperativeHandle(r,function(){return{props:p,getElement:function(){return y.current}}});var j=t({ref:y,className:(0,l.xW)(p.className,b("root")),style:p.style},u.getOtherProps(p),v("root")),x=t({className:b("value")},v("value"));return a.createElement("span",j,g,a.createElement("span",x,p.value),a.createElement("span",null,p.children))});p.displayName="Tag"},1987:()=>{},2948:(e,r,t)=>{"use strict";t.d(r,{default:()=>h});var a=t(5155),s=t(2115);t(161),t(1495);var i=t(29),n=t(7182);let l=()=>{let[e,r]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"add-unit",children:[(0,a.jsx)(i.$,{label:"Ajouter une unit\xe9",icon:"pi pi-plus",className:"p-button-success",onClick:()=>r(!0)}),(0,a.jsx)(n.A,{visible:e,onHide:()=>r(!1)})]})};var o=t(8411),c=t(4333),u=t(6596),d=t(5973),p=t(8574),m=t(4547),v=t(4340),b=t(1771),f=t(3769),y=t(4064);let h=()=>{let[e,r]=(0,s.useState)([]),[t,n]=(0,s.useState)(!0),[h,g]=(0,s.useState)(""),j=(0,s.useRef)(null),{showToast:x}=(0,y.d)();(0,s.useEffect)(()=>{let e=(()=>{try{n(!0);let e=(0,u.P)((0,u.rJ)(d.db,"units"),(0,u.My)("name","asc"));return(0,u.aQ)(e,e=>{let t=e.docs.map(e=>{var r,t,a;let s=e.data();return{id:e.id,name:s.name,abbreviation:s.abbreviation,createdAt:null==(r=s.createdAt)?void 0:r.toDate(),updatedAt:null==(t=s.updatedAt)?void 0:t.toDate(),isActive:null==(a=s.isActive)||a}});r(t),n(!1)},e=>{console.error("Error getting units:",e),x({severity:"error",summary:f.g.error.default,detail:"Impossible de charger les unit\xe9s"}),n(!1)})}catch(e){return console.error("Error in handleFetchUnits:",e),n(!1),()=>{}}})();return()=>e()},[]);let N=async e=>{try{await (0,u.kd)((0,u.H9)(d.db,"units",e)),x({severity:"success",summary:f.g.success.default,detail:f.g.success.delete})}catch(e){console.error("Erreur de suppression:",e),x({severity:"error",summary:f.g.error.default,detail:f.g.error.delete})}},A=async e=>{try{let{newValue:r,field:t,rowData:a}=e;await (0,u.mZ)((0,u.H9)(d.db,"units",a.id),{[t]:r,updatedAt:new Date}),x({severity:"success",summary:f.g.success.default,detail:f.g.success.update})}catch(e){console.error("Erreur de mise \xe0 jour:",e),x({severity:"error",summary:f.g.error.default,detail:f.g.error.update})}},E=async e=>{try{await (0,u.mZ)((0,u.H9)(d.db,"units",e.id),{isActive:!e.isActive,updatedAt:new Date}),x({severity:"success",summary:f.g.success.default,detail:"Unit\xe9 marqu\xe9e comme ".concat(e.isActive?"inactive":"active")})}catch(e){console.error("Erreur de mise \xe0 jour du statut:",e),x({severity:"error",summary:f.g.error.default,detail:"Impossible de mettre \xe0 jour le statut"})}},S=(0,a.jsxs)("div",{className:"table-header",children:[(0,a.jsx)("h2",{children:"Gestion des Unit\xe9s"}),(0,a.jsxs)("div",{className:"table-header-actions",children:[(0,a.jsxs)("span",{className:"p-input-icon-left",children:[(0,a.jsx)("i",{className:"pi pi-search"}),(0,a.jsx)(v.S,{value:h,onChange:e=>g(e.target.value),placeholder:"Rechercher..."})]}),(0,a.jsx)(l,{})]})]}),w=(e,r)=>{var t;return(null==(t=e[r])?void 0:t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))||"-"};return(0,a.jsxs)("div",{className:"units-admin",children:[(0,a.jsx)(p.y,{ref:j}),(0,a.jsx)(m.T,{}),(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)(o.b,{value:e,paginator:!0,rows:10,loading:t,globalFilter:h,header:S,editMode:"cell",className:"units-table",emptyMessage:"Aucune unit\xe9 trouv\xe9e",responsiveLayout:"scroll",showGridlines:!0,stripedRows:!0,children:[(0,a.jsx)(c.V,{field:"name",header:"Nom",sortable:!0,editor:e=>(0,a.jsx)(v.S,{value:e.value,onChange:r=>{var t;return null==(t=e.editorCallback)?void 0:t.call(e,r.target.value)}}),onCellEditComplete:A}),(0,a.jsx)(c.V,{field:"abbreviation",header:"Abr\xe9viation",sortable:!0,editor:e=>(0,a.jsx)(v.S,{value:e.value,onChange:r=>{var t;return null==(t=e.editorCallback)?void 0:t.call(e,r.target.value)}}),onCellEditComplete:A}),(0,a.jsx)(c.V,{field:"isActive",header:"Statut",sortable:!0,body:e=>(0,a.jsx)(b.v,{value:e.isActive?"Active":"Inactive",severity:e.isActive?"success":"danger",onClick:()=>E(e),style:{cursor:"pointer"}})}),(0,a.jsx)(c.V,{field:"createdAt",header:"Cr\xe9\xe9 le",sortable:!0,body:e=>w(e,"createdAt")}),(0,a.jsx)(c.V,{field:"updatedAt",header:"Modifi\xe9 le",sortable:!0,body:e=>w(e,"updatedAt")}),(0,a.jsx)(c.V,{body:e=>(0,a.jsx)("div",{className:"action-buttons",children:(0,a.jsx)(i.$,{icon:"pi pi-trash",className:"p-button-rounded p-button-danger p-button-text",onClick:()=>{var r,t;return r=e.id,t=e.name,void(0,m.Z)({message:"\xcates-vous s\xfbr de vouloir supprimer l'unit\xe9 \"".concat(t,'" ?'),header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Oui",rejectLabel:"Non",accept:()=>N(r)})},tooltip:"Supprimer"})}),header:"Actions",style:{width:"100px"}})]})})]})}},3012:(e,r,t)=>{Promise.resolve().then(t.bind(t,2948))},3769:(e,r,t)=>{"use strict";t.d(r,{P:()=>a,g:()=>s});let a=(e,r)=>{e.current&&e.current.show({severity:r.severity,summary:r.summary,detail:r.detail,life:r.life||1e3})},s={success:{default:"Succ\xe8s",create:"Cr\xe9ation r\xe9ussie",update:"Mise \xe0 jour r\xe9ussie",delete:"Suppression r\xe9ussie",accept:"Acceptation r\xe9ussie",reject:"Rejet r\xe9ussi"},error:{default:"Erreur",create:"Erreur lors de la cr\xe9ation",update:"Erreur lors de la mise \xe0 jour",delete:"Erreur lors de la suppression",auth:"Vous devez \xeatre connect\xe9",accept:"Erreur lors de l'acceptation",reject:"Erreur lors du rejet"},warning:{default:"Attention"},info:{default:"Information",reject:"Rejet effectu\xe9"}}},4064:(e,r,t)=>{"use strict";t.d(r,{d:()=>c,t:()=>o});var a=t(5155),s=t(2115),i=t(8574),n=t(3769);let l=(0,s.createContext)(void 0),o=e=>{let{children:r}=e,t=(0,s.useRef)(null);return(0,a.jsxs)(l.Provider,{value:{showToast:e=>{(0,n.P)(t,e)}},children:[r,(0,a.jsx)(i.y,{ref:t})]})},c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},5973:(e,r,t)=>{"use strict";t.d(r,{I:()=>u,db:()=>c,j:()=>o});var a=t(2078),s=t(9708),i=t(8134),n=t(3885);let l=(0,a.Wp)({apiKey:"AIzaSyCRqPaeQ_8kRByuf8l9_Fkcbmdgy_0aWI4",authDomain:"recettes-cuisine-a1bf2.firebaseapp.com",projectId:"recettes-cuisine-a1bf2",storageBucket:"recettes-cuisine-a1bf2.firebasestorage.app",messagingSenderId:"854150054780",appId:"1:854150054780:web:e3866880aea3e01d5c1af9",measurementId:"G-1J6YNX5LZM"}),o=(0,n.xI)(l),c=(0,s.aU)(l),u=(0,i.c7)(l)},7182:(e,r,t)=>{"use strict";t.d(r,{A:()=>m});var a=t(5155),s=t(2115);t(1987);var i=t(4340),n=t(29),l=t(8574),o=t(942),c=t(6596),u=t(5973),d=t(3769),p=t(4064);let m=e=>{let{visible:r,onHide:t,onUnitCreated:m,initialName:v}=e,[b,f]=(0,s.useState)(""),[y,h]=(0,s.useState)(""),[g,j]=(0,s.useState)(!1),[x,N]=(0,s.useState)({}),A=(0,s.useRef)(null),{showToast:E}=(0,p.d)();(0,s.useEffect)(()=>{r&&f(v||"")},[r,v]);let S=async e=>{if(e.preventDefault(),(()=>{let e={};return b.trim()||(e.name="Le nom est requis"),y.trim()||(e.abbreviation="L'abr\xe9viation est requise"),y.length>5&&(e.abbreviation="L'abr\xe9viation ne doit pas d\xe9passer 5 caract\xe8res"),N(e),0===Object.keys(e).length})()){j(!0);try{let e=await (0,c.gS)((0,c.rJ)(u.db,"units"),{name:b.trim(),abbreviation:y.trim(),createdAt:new Date,isActive:!0});m&&m({id:e.id,name:b.trim(),abbreviation:y.trim()}),E({severity:"success",summary:d.g.success.default,detail:d.g.success.create}),f(""),h(""),t()}catch(e){console.error("Error creating unit:",e),E({severity:"error",summary:d.g.error.default,detail:d.g.error.create})}finally{j(!1)}}},w=(0,a.jsxs)("div",{className:"form-actions",children:[(0,a.jsx)(n.$,{type:"submit",label:"Ajouter",icon:"pi pi-check",loading:g,className:"p-button-success",onClick:S}),(0,a.jsx)(n.$,{type:"button",label:"Annuler",icon:"pi pi-times",onClick:t,className:"p-button-text"})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.y,{ref:A}),(0,a.jsx)(o.l,{header:"Ajouter une unit\xe9",visible:r,onHide:t,footer:w,modal:!0,className:"add-unit-dialog",closeOnEscape:!0,dismissableMask:!0,children:(0,a.jsxs)("div",{className:"form-container",children:[(0,a.jsx)("p",{className:"required-field-note",children:"* Champs requis"}),(0,a.jsxs)("div",{className:"form-field",children:[(0,a.jsxs)("label",{htmlFor:"name",children:["Nom ",(0,a.jsx)("span",{className:"required",children:"*"})]}),(0,a.jsxs)("span",{className:"p-input-icon-right",children:[(0,a.jsx)("i",{className:b?"pi pi-check":"pi pi-times",style:{color:b?"var(--green-500)":"var(--red-500)"}}),(0,a.jsx)(i.S,{id:"name",value:b,onChange:e=>{f(e.target.value),N({...x,name:void 0})},placeholder:"Entrez le nom de l'unit\xe9",className:x.name?"p-invalid":""})]}),x.name&&(0,a.jsx)("small",{className:"p-error",children:x.name})]}),(0,a.jsxs)("div",{className:"form-field",children:[(0,a.jsxs)("label",{htmlFor:"abbreviation",children:["Abr\xe9viation ",(0,a.jsx)("span",{className:"required",children:"*"})]}),(0,a.jsxs)("span",{className:"p-input-icon-right",children:[(0,a.jsx)("i",{className:y?"pi pi-check":"pi pi-times",style:{color:y?"var(--green-500)":"var(--red-500)"}}),(0,a.jsx)(i.S,{id:"abbreviation",value:y,onChange:e=>{h(e.target.value),N({...x,abbreviation:void 0})},placeholder:"Entrez l'abr\xe9viation",className:x.abbreviation?"p-invalid":"",maxLength:5})]}),x.abbreviation&&(0,a.jsx)("small",{className:"p-error",children:x.abbreviation})]})]})})]})}}},e=>{e.O(0,[6697,9844,2992,9895,9657,4797,1055,8296,29,6946,8574,3640,1056,2165,2571,1139,8441,1255,7358],()=>e(e.s=3012)),_N_E=e.O()}]);