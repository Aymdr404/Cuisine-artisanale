(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1266],{1086:(e,r,s)=>{"use strict";s.d(r,{default:()=>y});var t=s(5155),a=s(2115);s(3899);var n=s(6596),i=s(5973),o=s(8411),l=s(4333),d=s(29),u=s(4340),c=s(6218),p=s(8574),m=s(4547),h=s(1695),f=s(3769),g=s(4064);let y=()=>{let[e,r]=(0,a.useState)([]),[s,y]=(0,a.useState)(!0),[v,b]=(0,a.useState)(""),x=(0,a.useRef)(null),{showToast:j}=(0,g.d)(),k=[{label:"Utilisateur",value:"user"},{label:"Administrateur",value:"admin"}],N=async()=>{try{y(!0);let e=(await (0,n.GG)((0,n.rJ)(i.db,"users"))).docs.map(e=>{var r,s;let t=e.data();return{userId:e.id,email:t.email,role:t.role,createdAt:null==(r=t.createdAt)?void 0:r.toDate(),lastLogin:null==(s=t.lastLogin)?void 0:s.toDate(),displayName:t.displayName,photoURL:t.photoURL}});r(e)}catch(e){console.error("Erreur lors du chargement des utilisateurs:",e),j({severity:"error",summary:f.g.error.default,detail:"Impossible de charger les utilisateurs"})}finally{y(!1)}};(0,a.useEffect)(()=>{N()},[]);let E=async e=>{try{await (0,n.kd)((0,n.H9)(i.db,"users",e)),j({severity:"success",summary:f.g.success.default,detail:f.g.success.delete})}catch(e){console.error("Erreur lors de la suppression:",e),j({severity:"error",summary:f.g.error.default,detail:f.g.error.delete})}},w=async e=>{let{newValue:r,field:s,rowData:t}=e;try{await (0,n.mZ)((0,n.H9)(i.db,"users",t.userId),{[s]:r,updatedAt:new Date}),j({severity:"success",summary:f.g.success.default,detail:f.g.success.update})}catch(e){console.error("Erreur lors de la mise \xe0 jour:",e),j({severity:"error",summary:f.g.error.default,detail:f.g.error.update})}},C=(0,t.jsxs)("div",{className:"table-header",children:[(0,t.jsx)("h2",{children:"Gestion des Utilisateurs"}),(0,t.jsxs)("span",{className:"p-input-icon-left",children:[(0,t.jsx)("i",{className:"pi pi-search"}),(0,t.jsx)(u.S,{type:"search",placeholder:"Rechercher...",onInput:e=>b(e.target.value)})]})]}),I=(e,r)=>{var s;return(null==(s=e[r])?void 0:s.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))||"-"};return s?(0,t.jsxs)("div",{className:"loading-container",children:[(0,t.jsx)(h.p,{}),(0,t.jsx)("p",{children:"Chargement des utilisateurs..."})]}):(0,t.jsxs)("div",{className:"users-container",children:[(0,t.jsx)(p.y,{ref:x}),(0,t.jsx)(m.T,{}),(0,t.jsxs)(o.b,{value:e,paginator:!0,rows:10,rowsPerPageOptions:[5,10,25,50],globalFilter:v,header:C,emptyMessage:"Aucun utilisateur trouv\xe9",className:"user-table",editMode:"cell",dataKey:"userId",responsiveLayout:"scroll",showGridlines:!0,children:[(0,t.jsx)(l.V,{header:"Avatar",body:e=>(0,t.jsx)("div",{className:"user-avatar",children:e.photoURL?(0,t.jsx)("img",{src:e.photoURL,alt:e.displayName||"User"}):(0,t.jsx)("i",{className:"pi pi-user"})}),style:{width:"80px"}}),(0,t.jsx)(l.V,{field:"displayName",header:"Nom",sortable:!0}),(0,t.jsx)(l.V,{field:"email",header:"Email",sortable:!0,editor:e=>(e=>(0,t.jsx)(u.S,{value:e.value,onChange:r=>e.editorCallback(r.target.value),autoFocus:!0}))(e),onCellEditComplete:w}),(0,t.jsx)(l.V,{field:"role",header:"R\xf4le",sortable:!0,editor:e=>(0,t.jsx)(c.m,{value:e.value,options:k,onChange:r=>e.editorCallback(r.value),placeholder:"S\xe9lectionner un r\xf4le"}),onCellEditComplete:w,body:e=>{var r;return(null==(r=k.find(r=>r.value===e.role))?void 0:r.label)||e.role}}),(0,t.jsx)(l.V,{field:"createdAt",header:"Cr\xe9\xe9 le",sortable:!0,body:e=>I(e,"createdAt")}),(0,t.jsx)(l.V,{field:"lastLogin",header:"Derni\xe8re connexion",sortable:!0,body:e=>I(e,"lastLogin")}),(0,t.jsx)(l.V,{body:e=>(0,t.jsx)("div",{className:"action-buttons",children:(0,t.jsx)(d.$,{icon:"pi pi-trash",className:"p-button-rounded p-button-danger p-button-text",onClick:()=>{var r,s;return r=e.userId,s=e.email,void(0,m.Z)({message:"\xcates-vous s\xfbr de vouloir supprimer l'utilisateur ".concat(s," ?"),header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Oui",rejectLabel:"Non",accept:()=>E(r)})},tooltip:"Supprimer",tooltipOptions:{position:"left"}})}),header:"Actions",style:{width:"100px"}})]})]})}},1695:(e,r,s)=>{"use strict";s.d(r,{p:()=>d});var t=s(2115),a=s(71),n=s(1055),i=s(5751),o=s(2811),l=n.x.extend({defaultProps:{__TYPE:"ProgressSpinner",id:null,style:null,className:null,strokeWidth:"2",fill:"none",animationDuration:"2s",children:void 0},css:{classes:{root:"p-progress-spinner",spinner:"p-progress-spinner-svg",circle:"p-progress-spinner-circle"},styles:"\n@layer primereact {\n    .p-progress-spinner {\n        position: relative;\n        margin: 0 auto;\n        width: 100px;\n        height: 100px;\n        display: inline-block;\n    }\n    \n    .p-progress-spinner::before {\n        content: '';\n        display: block;\n        padding-top: 100%;\n    }\n    \n    .p-progress-spinner-svg {\n        animation: p-progress-spinner-rotate 2s linear infinite;\n        height: 100%;\n        transform-origin: center center;\n        width: 100%;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        margin: auto;\n    }\n    \n    .p-progress-spinner-circle {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: 0;\n        stroke: #d62d20;\n        animation: p-progress-spinner-dash 1.5s ease-in-out infinite, p-progress-spinner-color 6s ease-in-out infinite;\n        stroke-linecap: round;\n    }\n}\n\n@keyframes p-progress-spinner-rotate {\n    100% {\n        transform: rotate(360deg);\n    }\n}\n\n@keyframes p-progress-spinner-dash {\n    0% {\n        stroke-dasharray: 1, 200;\n        stroke-dashoffset: 0;\n    }\n    50% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -35px;\n    }\n    100% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -124px;\n    }\n}\n\n@keyframes p-progress-spinner-color {\n    100%,\n    0% {\n        stroke: #d62d20;\n    }\n    40% {\n        stroke: #0057e7;\n    }\n    66% {\n        stroke: #008744;\n    }\n    80%,\n    90% {\n        stroke: #ffa700;\n    }\n}\n",inlineStyles:{spinner:function(e){return{animationDuration:e.props.animationDuration}}}}}),d=t.memo(t.forwardRef(function(e,r){var s=(0,i.qV)(),d=t.useContext(a.UM),u=l.getProps(e,d),c=t.useRef(null),p=l.setMetaData({props:u}),m=p.ptm,h=p.cx,f=p.sx,g=p.isUnstyled;(0,n.j)(l.css.styles,g,{name:"progressspinner"}),t.useImperativeHandle(r,function(){return{props:u,getElement:function(){return c.current}}});var y=s({id:u.id,ref:c,style:u.style,className:(0,o.xW)(u.className,h("root")),role:"progressbar","aria-busy":!0},l.getOtherProps(u),m("root")),v=s({className:h("spinner"),viewBox:"25 25 50 50",style:f("spinner")},m("spinner")),b=s({className:h("circle"),cx:"50",cy:"50",r:"20",fill:u.fill,strokeWidth:u.strokeWidth,strokeMiterlimit:"10"},m("circle"));return t.createElement("div",y,t.createElement("svg",v,t.createElement("circle",b)))}));d.displayName="ProgressSpinner"},2756:(e,r,s)=>{Promise.resolve().then(s.bind(s,1086))},3769:(e,r,s)=>{"use strict";s.d(r,{P:()=>t,g:()=>a});let t=(e,r)=>{e.current&&e.current.show({severity:r.severity,summary:r.summary,detail:r.detail,life:r.life||1e3})},a={success:{default:"Succ\xe8s",create:"Cr\xe9ation r\xe9ussie",update:"Mise \xe0 jour r\xe9ussie",delete:"Suppression r\xe9ussie",accept:"Acceptation r\xe9ussie",reject:"Rejet r\xe9ussi"},error:{default:"Erreur",create:"Erreur lors de la cr\xe9ation",update:"Erreur lors de la mise \xe0 jour",delete:"Erreur lors de la suppression",auth:"Vous devez \xeatre connect\xe9",accept:"Erreur lors de l'acceptation",reject:"Erreur lors du rejet"},warning:{default:"Attention"},info:{default:"Information",reject:"Rejet effectu\xe9"}}},3899:()=>{},4064:(e,r,s)=>{"use strict";s.d(r,{d:()=>d,t:()=>l});var t=s(5155),a=s(2115),n=s(8574),i=s(3769);let o=(0,a.createContext)(void 0),l=e=>{let{children:r}=e,s=(0,a.useRef)(null);return(0,t.jsxs)(o.Provider,{value:{showToast:e=>{(0,i.P)(s,e)}},children:[r,(0,t.jsx)(n.y,{ref:s})]})},d=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},5973:(e,r,s)=>{"use strict";s.d(r,{I:()=>u,db:()=>d,j:()=>l});var t=s(2078),a=s(9708),n=s(8134),i=s(3885);let o=(0,t.Wp)({apiKey:"AIzaSyCRqPaeQ_8kRByuf8l9_Fkcbmdgy_0aWI4",authDomain:"recettes-cuisine-a1bf2.firebaseapp.com",projectId:"recettes-cuisine-a1bf2",storageBucket:"recettes-cuisine-a1bf2.firebasestorage.app",messagingSenderId:"854150054780",appId:"1:854150054780:web:e3866880aea3e01d5c1af9",measurementId:"G-1J6YNX5LZM"}),l=(0,i.xI)(o),d=(0,a.aU)(o),u=(0,n.c7)(o)}},e=>{e.O(0,[2220,2992,9895,9657,4797,1055,8296,29,6946,8574,3640,1056,2165,2571,1139,8441,1255,7358],()=>e(e.s=2756)),_N_E=e.O()}]);