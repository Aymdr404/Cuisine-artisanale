(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{870:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var n=r(5155),s=r(2115);r(7343);var i=r(5973),a=r(9708),o=r(2619),l=r.n(o);let c=()=>{var e;let[t,r]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=(0,a.H9)(i.db,"weeklyRecipe","current"),t=await (0,a.x7)(e);if(t.exists()){r(t.data()),c(!1);return}}catch(e){console.error("Erreur lors du chargement de la recette de la semaine :",e)}finally{c(!1)}};return o?(0,n.jsx)("p",{className:"loading",children:"Chargement de la recette de la semaine..."}):t?(0,n.jsxs)("section",{className:"featured-recette",children:[(0,n.jsx)("h2",{children:"\uD83E\uDD47 Recette de la semaine"}),(0,n.jsxs)("div",{className:"featured-card",children:[(null==(e=t.images)?void 0:e[0])&&(0,n.jsx)("img",{src:t.images[0],alt:t.title,className:"featured-img",height:400,width:600}),(0,n.jsxs)("div",{className:"featured-content",children:[(0,n.jsx)("h3",{children:t.title}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Type :"})," ",t.type]}),t.position&&(0,n.jsxs)("p",{children:["\uD83D\uDCCD ",t.position]}),(0,n.jsx)(l(),{href:"/recettes/".concat(t.title.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_").toLowerCase()),children:(0,n.jsx)("button",{className:"featured-button",children:"Voir la recette"})})]})]})]}):(0,n.jsx)("p",{children:"Aucune recette disponible pour cette semaine."})}},2387:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i});var n=r(2811);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i={DEFAULT_MASKS:{pint:/[\d]/,int:/[\d\-]/,pnum:/[\d\.]/,money:/[\d\.\s,]/,num:/[\d\-\.]/,hex:/[0-9a-f]/i,email:/[a-z0-9_\.\-@]/i,alpha:/[a-z_]/i,alphanum:/[a-z0-9_]/i},getRegex:function(e){return i.DEFAULT_MASKS[e]?i.DEFAULT_MASKS[e]:e},onBeforeInput:function(e,t,r){!r&&n.DV.isAndroid()&&this.validateKey(e,e.data,t)},onKeyPress:function(e,t,r){!(r||n.DV.isAndroid())&&(e.ctrlKey||e.altKey||e.metaKey||this.validateKey(e,e.key,t))},onPaste:function(e,t,r){if(!r){var n,i=this.getRegex(t);((function(e){if(Array.isArray(e))return s(e)})(n=e.clipboardData.getData("text"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,void 0):void 0}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach(function(t){if(!i.test(t))return e.preventDefault(),!1})}},validateKey:function(e,t,r){null!=t&&t.length<=2&&(this.getRegex(r).test(t)||e.preventDefault())},validate:function(e,t){var r=e.target.value,n=!0,s=this.getRegex(t);return r&&!s.test(r)&&(n=!1),n}}},2639:()=>{},2718:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,O:()=>c});var n=r(5155),s=r(2115),i=r(5973),a=r(3885),o=r(9708);let l=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[p,m]=(0,s.useState)(!0),[f,y]=(0,s.useState)(null),v=async e=>{let t=(0,o.aU)(),r=(0,o.H9)(t,"users",e),n=await (0,o.x7)(r);return n.exists()?n.data().role:null},b=async(e,t)=>{let r=(0,o.aU)(),n=(0,o.H9)(r,"users",e);await (0,o.BN)(n,{email:t,role:"user",createdAt:new Date})};(0,s.useEffect)(()=>{let e=(0,a.hg)(i.j,async e=>{try{if(e){c(e);let t=await v(e.uid);t?d(t):(await b(e.uid,e.email||""),d("user"))}else c(null),d(null)}catch(e){console.error("Error in auth state change:",e),y(e instanceof Error?e.message:"An error occurred")}finally{m(!1)}});return()=>e()},[]);let h=async()=>{try{y(null),await (0,a.CI)(i.j),d(null),window.location.href="/Cuisine-artisanale/"}catch(e){console.error("Error signing out:",e),y(e instanceof Error?e.message:"Error signing out")}},g=async()=>{try{y(null);let e=new a.HF,t=await (0,a.df)(i.j,e);t.user&&(await v(t.user.uid)||(await b(t.user.uid,t.user.email||""),d("user")))}catch(e){throw console.error("Error signing in with Google:",e),y(e instanceof Error?e.message:"Error signing in with Google"),e}};return(0,n.jsx)(l.Provider,{value:{user:r,role:u,logout:h,signInWithGoogle:g,loading:p,error:f},children:t})},u=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2740:(e,t,r)=>{"use strict";r.d(t,{Q:()=>b});var n=r(2115),s=r(71),i=r(1055),a=r(5751),o=r(9566),l=r(1523),c=r(4926),u=r(3932),d=r(2811);function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r){var n;return(n=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==m(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=i.x.extend({defaultProps:{__TYPE:"Message",id:null,className:null,style:null,text:null,icon:null,severity:"info",content:null,children:void 0},css:{classes:{root:function(e){var t=e.props.severity;return(0,d.xW)("p-inline-message p-component",f({},"p-inline-message-".concat(t),t))},icon:"p-inline-message-icon",text:"p-inline-message-text"},styles:"\n        @layer primereact {\n            .p-inline-message {\n                display: inline-flex;\n                align-items: center;\n                justify-content: center;\n                vertical-align: top;\n            }\n\n            .p-inline-message-icon {\n                flex-shrink: 0;\n            }\n            \n            .p-inline-message-icon-only .p-inline-message-text {\n                visibility: hidden;\n                width: 0;\n            }\n            \n            .p-fluid .p-inline-message {\n                display: flex;\n            }        \n        }\n        "}});function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var b=n.memo(n.forwardRef(function(e,t){var r=(0,a.qV)(),m=n.useContext(s.UM),b=y.getProps(e,m),h=n.useRef(null),g=y.setMetaData({props:b}),j=g.ptm,x=g.cx,w=g.isUnstyled;(0,i.j)(y.css.styles,w,{name:"message"}),n.useImperativeHandle(t,function(){return{props:b,getElement:function(){return h.current}}});var N=function(){if(b.content)return d.BF.getJSXElement(b.content,b);var e=d.BF.getJSXElement(b.text,b),t=r({className:x("icon")},j("icon")),s=b.icon;if(!s)switch(b.severity){case"info":s=n.createElement(c.e,t);break;case"warn":s=n.createElement(l.P,t);break;case"error":s=n.createElement(u.I,t);break;case"success":s=n.createElement(o.S,t)}var i=d.Hj.getJSXIcon(s,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t),{props:b}),a=r({className:x("text")},j("text"));return n.createElement(n.Fragment,null,i,n.createElement("span",a,e))}(),P=r({className:(0,d.xW)(b.className,x("root")),style:b.style,role:"alert","aria-live":"polite","aria-atomic":"true"},y.getOtherProps(b),j("root"));return n.createElement("div",p({id:b.id,ref:h},P),N)}));b.displayName="Message"},3767:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var n=(0,r(2811).l7)()},4340:(e,t,r)=>{"use strict";r.d(t,{S:()=>y});var n=r(2115),s=r(71),i=r(1055),a=r(5751),o=r(2387),l=r(791),c=r(2811);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=i.x.extend({defaultProps:{__TYPE:"InputText",__parentMetadata:null,children:void 0,className:null,invalid:!1,variant:null,keyfilter:null,onBeforeInput:null,onInput:null,onKeyDown:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,iconPosition:null},css:{classes:{root:function(e){var t=e.props,r=e.isFilled,n=e.context;return(0,c.xW)("p-inputtext p-component",{"p-disabled":t.disabled,"p-filled":r,"p-invalid":t.invalid,"p-variant-filled":t.variant?"filled"===t.variant:n&&"filled"===n.inputStyle})}}}});function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){!function(e,t,r){var n;(n=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==d(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=n.memo(n.forwardRef(function(e,t){var r=(0,a.qV)(),d=n.useContext(s.UM),m=p.getProps(e,d),y=p.setMetaData(f(f({props:m},m.__parentMetadata),{},{context:{disabled:m.disabled,iconPosition:m.iconPosition}})),v=y.ptm,b=y.cx,h=y.isUnstyled;(0,i.j)(p.css.styles,h,{name:"inputtext",styled:!0});var g=n.useRef(t);n.useEffect(function(){c.BF.combinedRefs(g,t)},[g,t]);var j=n.useMemo(function(){return c.BF.isNotEmpty(m.value)||c.BF.isNotEmpty(m.defaultValue)},[m.value,m.defaultValue]),x=c.BF.isNotEmpty(m.tooltip);n.useEffect(function(){var e;j||null!=(e=g.current)&&e.value?c.DV.addClass(g.current,"p-filled"):c.DV.removeClass(g.current,"p-filled")},[m.disabled,j]);var w=r({className:(0,c.xW)(m.className,b("root",{context:d,isFilled:j})),onBeforeInput:function(e){m.onBeforeInput&&m.onBeforeInput(e),m.keyfilter&&o.Q.onBeforeInput(e,m.keyfilter,m.validateOnly)},onInput:function(e){var t=e.target,r=!0;m.keyfilter&&m.validateOnly&&(r=o.Q.validate(e,m.keyfilter)),m.onInput&&m.onInput(e,r),c.BF.isNotEmpty(t.value)?c.DV.addClass(t,"p-filled"):c.DV.removeClass(t,"p-filled")},onKeyDown:function(e){m.onKeyDown&&m.onKeyDown(e),m.keyfilter&&o.Q.onKeyPress(e,m.keyfilter,m.validateOnly)},onPaste:function(e){m.onPaste&&m.onPaste(e),m.keyfilter&&o.Q.onPaste(e,m.keyfilter,m.validateOnly)}},p.getOtherProps(m),v("root"));return n.createElement(n.Fragment,null,n.createElement("input",u({ref:g},w)),x&&n.createElement(l.m,u({target:g,content:m.tooltip,pt:v("tooltip")},m.tooltipOptions)))}));y.displayName="InputText"},4451:()=>{},5699:()=>{},5973:(e,t,r)=>{"use strict";r.d(t,{I:()=>u,db:()=>c,j:()=>l});var n=r(2078),s=r(9708),i=r(8134),a=r(3885);let o=(0,n.Wp)({apiKey:"AIzaSyCRqPaeQ_8kRByuf8l9_Fkcbmdgy_0aWI4",authDomain:"recettes-cuisine-a1bf2.firebaseapp.com",projectId:"recettes-cuisine-a1bf2",storageBucket:"recettes-cuisine-a1bf2.firebasestorage.app",messagingSenderId:"854150054780",appId:"1:854150054780:web:e3866880aea3e01d5c1af9",measurementId:"G-1J6YNX5LZM"}),l=(0,a.xI)(o),c=(0,s.aU)(o),u=(0,i.c7)(o)},7343:()=>{},8212:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(5155),s=r(2115);r(2639),r(5699);var i=r(29);r(4451);var a=r(4340),o=r(3303),l=r(2740),c=r(5973),u=r(9708),d=r(2718);let p=["merde","putain","con","connard","salope","bite","cul","encul\xe9","fdp","ta gueule","nique","bordel","chiant","emmerde","enculeur","p\xe9d\xe9","gouine","batard","encul\xe9e","test","penis","fuck","shit","bitch","ass","dick","bastard","crap","slut","motherfucker","cunt","damn","pussy","prick","whore","cock","retard","jerk","douche","tests"],m=e=>{let t=e.toLowerCase();return p.some(e=>t.includes(e))},f=e=>{let{closeForm:t}=e,[r,p]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[v,b]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),{user:j}=(0,d.A)(),x=async e=>{if(e.preventDefault(),g(null),r.trim()&&f.trim()&&j){if(m(r)||m(f))return void g("Le contenu contient des mots inappropri\xe9s. Veuillez modifier votre message.");b(!0);try{await (0,u.gS)((0,u.rJ)(c.db,"posts"),{title:r.trim(),content:f,createdAt:(0,u.O5)(),userId:j.uid,userName:j.displayName||"Anonymous",visible:!1}),t()}catch(e){console.error("Error adding post:",e),g("Une erreur est survenue lors de la publication du post.")}finally{b(!1)}}};return(0,n.jsx)("div",{className:"AddPostForm",children:(0,n.jsxs)("form",{className:"formPost",onSubmit:x,children:[(0,n.jsx)("h3",{children:"Nouveau Post"}),h&&(0,n.jsx)(l.Q,{severity:"error",text:h,style:{marginBottom:"1rem"}}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"title",children:"Titre"}),(0,n.jsx)(a.S,{id:"title",value:r,onChange:e=>p(e.target.value),placeholder:"Entrez le titre",required:!0,autoFocus:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"content",children:"Contenu"}),(0,n.jsx)(o.Z,{id:"content",value:f,onChange:e=>y(e.target.value),placeholder:"\xc9crivez votre post ici...",required:!0,rows:5,autoResize:!0,style:{whiteSpace:"pre-wrap"}})]}),(0,n.jsxs)("div",{className:"buttons-form",children:[(0,n.jsx)(i.$,{type:"button",label:"Annuler",className:"p-button-outlined",onClick:t,disabled:v}),(0,n.jsx)(i.$,{type:"submit",label:"Publier",loading:v,disabled:!r.trim()||!f.trim()})]})]})})},y=()=>{let[e,t]=(0,s.useState)(!1),{user:r}=(0,d.A)(),a=()=>{t(!0)};return(0,n.jsxs)("div",{className:"AddPost",children:[(0,n.jsxs)("div",{className:"desktop-post",children:[(0,n.jsx)("h2",{children:"Ajouter un post"}),(0,n.jsx)("p",{children:"Partagez vos pens\xe9es avec le monde !"}),(0,n.jsx)(i.$,{onClick:a,disabled:!r,children:"Ajouter un post"}),!r&&(0,n.jsx)("p",{children:"Vous devez \xeatre connect\xe9 pour ajouter un post"})]}),(0,n.jsx)("div",{className:"mobile-floating-button",onClick:a,children:(0,n.jsx)(i.$,{icon:"pi pi-plus","aria-label":"Ajouter un post",className:"p-button-rounded p-button-lg"})}),e&&(0,n.jsx)(f,{closeForm:()=>{t(!1)}})]})};var v=r(4547);let b=s.lazy(()=>Promise.all([r.e(4562),r.e(8574),r.e(4687)]).then(r.bind(r,4687))),h=()=>{let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!0),[f,h]=(0,s.useState)(!1),{role:g,user:j}=(0,d.A)(),x=async()=>{l(!0);try{let e=(0,u.P)((0,u.rJ)(c.db,"posts"),(0,u.My)("createdAt","desc"),(0,u.AB)(5)),r=await (0,u.GG)(e),n=r.docs.map(e=>{let t=e.data();return{id:e.id,title:t.title,content:t.content,createdAt:t.createdAt.toDate(),visible:!1!==t.visible,userName:t.userName}});t(n),a(r.docs[r.docs.length-1]),m(5===r.size)}catch(e){console.error("Error fetching posts:",e)}l(!1)},w=async()=>{if(r&&!o){l(!0);try{let e=(0,u.P)((0,u.rJ)(c.db,"posts"),(0,u.My)("createdAt","desc"),(0,u.HM)(r),(0,u.AB)(5)),n=await (0,u.GG)(e),s=n.docs.map(e=>{let t=e.data();return{id:e.id,title:t.title,content:t.content,createdAt:t.createdAt.toDate(),visible:!1!==t.visible,userName:t.userName}});t(e=>[...e,...s]),a(n.docs[n.docs.length-1]),m(5===n.size)}catch(e){console.error("Error loading more posts:",e)}l(!1)}},N=()=>h(window.scrollY>300);(0,s.useEffect)(()=>(x(),window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N)),[j,g]);let P=(0,s.useMemo)(()=>e.filter(e=>e.visible||"admin"===g),[e,g]);return(0,n.jsxs)("div",{className:"Posts",children:[(0,n.jsx)(v.T,{}),(0,n.jsxs)("section",{className:"Posts_section",children:[o&&0===P.length&&Array.from({length:5}).map((e,t)=>(0,n.jsxs)("div",{className:"post-skeleton",children:[(0,n.jsx)("div",{className:"skeleton-title"}),(0,n.jsx)("div",{className:"skeleton-content"})]},t)),P.map(e=>(0,n.jsx)(s.Suspense,{fallback:(0,n.jsxs)("div",{className:"post-skeleton",children:[(0,n.jsx)("div",{className:"skeleton-title"}),(0,n.jsx)("div",{className:"skeleton-content"})]}),children:(0,n.jsx)(b,{postId:e.id,title:e.title,content:e.content,createdAt:e.createdAt.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),visible:e.visible,userName:e.userName})},e.id)),(0,n.jsx)("section",{className:"LoadMore_section",children:o&&P.length>0?(0,n.jsxs)("div",{className:"loading-spinner",children:[(0,n.jsx)("i",{className:"pi pi-spinner"}),(0,n.jsx)("span",{children:"Chargement des posts..."})]}):p?(0,n.jsx)(i.$,{onClick:w,icon:"pi pi-plus",label:"Charger plus de posts",className:"p-button-outlined"}):(0,n.jsxs)("div",{className:"no-more-posts",children:[(0,n.jsx)("i",{className:"pi pi-check-circle",style:{marginRight:"0.5rem"}}),"Vous avez vu tous les posts !"]})})]}),(0,n.jsx)("section",{className:"AddPost_section",children:(0,n.jsx)(y,{})}),(0,n.jsx)("button",{className:"scroll-top-button ".concat(f?"visible":""),onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),"aria-label":"Retour en haut",children:(0,n.jsx)("i",{className:"pi pi-angle-up",style:{fontSize:"1.5rem"}})})]})}},8769:(e,t,r)=>{Promise.resolve().then(r.bind(r,870)),Promise.resolve().then(r.bind(r,8212))}},e=>{e.O(0,[4005,2992,9895,4797,1055,8296,29,6946,1056,2619,2709,8441,1255,7358],()=>e(e.s=8769)),_N_E=e.O()}]);