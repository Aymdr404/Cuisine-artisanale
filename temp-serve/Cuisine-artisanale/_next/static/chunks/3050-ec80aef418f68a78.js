(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3050],{799:()=>{},1987:()=>{},3050:(e,r,s)=>{"use strict";s.d(r,{A:()=>h});var a=s(5155),i=s(2115);s(799);var t=s(4340),l=s(29),n=s(2165),c=s(6218),o=s(942),d=s(6596),u=s(5973),m=s(3769),p=s(4064),v=s(7182);let h=e=>{let{visible:r,onHide:s,initialName:h,onIngredientCreated:b}=e,[f,j]=(0,i.useState)(""),[x,g]=(0,i.useState)(0),[y,N]=(0,i.useState)(null),[E,k]=(0,i.useState)([]),[S,C]=(0,i.useState)(!1),[w,A]=(0,i.useState)({}),{showToast:q}=(0,p.d)(),[I,F]=(0,i.useState)(!1);(0,i.useEffect)(()=>{r&&(j(h||""),R())},[r,h]);let L=async e=>{if(e.preventDefault(),(()=>{let e={};return f.trim()||(e.name="Le nom est requis"),y||(e.unit="L'unit\xe9 est requise"),A(e),0===Object.keys(e).length})()){C(!0);try{let e=await (0,d.gS)((0,d.rJ)(u.db,"ingredients"),{name:f.trim(),price:x,unit:null==y?void 0:y.abbreviation,createdAt:new Date});await (0,d.mZ)(e,{ingredientId:e.id});let r={id:e.id,name:f.trim(),price:x,unit:null==y?void 0:y.abbreviation};q({severity:"success",summary:m.g.success.default,detail:m.g.success.create}),j(""),g(null),N(null),s(),b&&b(r)}catch(e){console.error("Error creating ingredient:",e),q({severity:"error",summary:m.g.error.default,detail:m.g.error.create})}finally{C(!1)}}},R=async()=>{try{let e=(0,d.P)((0,d.rJ)(u.db,"units")),r=(await (0,d.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));k(r)}catch(e){console.error("Error fetching units:",e),q({severity:"error",summary:"Erreur",detail:"Impossible de charger les unit\xe9s",life:3e3})}};(0,i.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]);let P=(0,a.jsxs)("div",{className:"form-actions",children:[(0,a.jsx)(l.$,{type:"submit",label:"Ajouter",icon:"pi pi-check",loading:S,className:"p-button-success",onClick:L}),(0,a.jsx)(l.$,{type:"button",label:"Annuler",icon:"pi pi-times",onClick:s,className:"p-button-text"})]});return(0,a.jsxs)(o.l,{header:"Ajouter un ingr\xe9dient",visible:r,onHide:s,footer:P,modal:!0,className:"add-ingredient-dialog",closeOnEscape:!0,dismissableMask:!0,children:[(0,a.jsxs)("div",{className:"form-container",children:[(0,a.jsx)("p",{className:"required-field-note",children:"* Champs requis"}),(0,a.jsxs)("div",{className:"form-field",children:[(0,a.jsxs)("label",{htmlFor:"name",children:["Nom ",(0,a.jsx)("span",{className:"required",children:"*"})]}),(0,a.jsxs)("span",{className:"p-input-icon-right",children:[(0,a.jsx)("i",{className:f?"pi pi-check":"pi pi-times",style:{color:f?"var(--green-500)":"var(--red-500)"}}),(0,a.jsx)(t.S,{id:"name",value:f,onChange:e=>{j(e.target.value),A({...w,name:void 0})},placeholder:"Entrez le nom de l'ingr\xe9dient",className:w.name?"p-invalid":""})]}),w.name&&(0,a.jsx)("small",{className:"p-error",children:w.name})]}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-field",children:[(0,a.jsx)("label",{htmlFor:"price",children:"Prix"}),(0,a.jsx)(n.Y,{id:"price",value:x,onValueChange:e=>g(e.value||null),mode:"currency",currency:"EUR",locale:"fr-FR",placeholder:"0,00 €",minFractionDigits:2})]}),(0,a.jsxs)("div",{className:"form-field",children:[(0,a.jsxs)("label",{htmlFor:"unit",children:["Unit\xe9 ",(0,a.jsx)("span",{className:"required",children:"*"})]}),(0,a.jsx)(c.m,{id:"unit",value:y,options:E,onChange:e=>{N(e.value),A({...w,unit:void 0})},optionLabel:"name",placeholder:"S\xe9lectionnez une unit\xe9",className:w.unit?"p-invalid":"",filter:!0,emptyFilterMessage:(0,a.jsx)("div",{className:"create-unit-option",onClick:()=>F(!0),style:{cursor:"pointer",color:"var(--primary-color)",padding:"0.5rem 1rem",textAlign:"center"},children:"➕ Cr\xe9er une nouvelle unit\xe9"})}),w.unit&&(0,a.jsx)("small",{className:"p-error",children:w.unit})]})]})]}),(0,a.jsx)(v.A,{visible:I,onHide:()=>F(!1),onUnitCreated:e=>{k(r=>[...r,e]),N(e),F(!1)},initialName:f})]})}},3769:(e,r,s)=>{"use strict";s.d(r,{P:()=>a,g:()=>i});let a=(e,r)=>{e.current&&e.current.show({severity:r.severity,summary:r.summary,detail:r.detail,life:r.life||1e3})},i={success:{default:"Succ\xe8s",create:"Cr\xe9ation r\xe9ussie",update:"Mise \xe0 jour r\xe9ussie",delete:"Suppression r\xe9ussie",accept:"Acceptation r\xe9ussie",reject:"Rejet r\xe9ussi"},error:{default:"Erreur",create:"Erreur lors de la cr\xe9ation",update:"Erreur lors de la mise \xe0 jour",delete:"Erreur lors de la suppression",auth:"Vous devez \xeatre connect\xe9",accept:"Erreur lors de l'acceptation",reject:"Erreur lors du rejet"},warning:{default:"Attention"},info:{default:"Information",reject:"Rejet effectu\xe9"}}},4064:(e,r,s)=>{"use strict";s.d(r,{d:()=>o,t:()=>c});var a=s(5155),i=s(2115),t=s(8574),l=s(3769);let n=(0,i.createContext)(void 0),c=e=>{let{children:r}=e,s=(0,i.useRef)(null);return(0,a.jsxs)(n.Provider,{value:{showToast:e=>{(0,l.P)(s,e)}},children:[r,(0,a.jsx)(t.y,{ref:s})]})},o=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},5973:(e,r,s)=>{"use strict";s.d(r,{I:()=>d,db:()=>o,j:()=>c});var a=s(2078),i=s(9708),t=s(8134),l=s(3885);let n=(0,a.Wp)({apiKey:"AIzaSyCRqPaeQ_8kRByuf8l9_Fkcbmdgy_0aWI4",authDomain:"recettes-cuisine-a1bf2.firebaseapp.com",projectId:"recettes-cuisine-a1bf2",storageBucket:"recettes-cuisine-a1bf2.firebasestorage.app",messagingSenderId:"854150054780",appId:"1:854150054780:web:e3866880aea3e01d5c1af9",measurementId:"G-1J6YNX5LZM"}),c=(0,l.xI)(n),o=(0,i.aU)(n),d=(0,t.c7)(n)},7182:(e,r,s)=>{"use strict";s.d(r,{A:()=>p});var a=s(5155),i=s(2115);s(1987);var t=s(4340),l=s(29),n=s(8574),c=s(942),o=s(6596),d=s(5973),u=s(3769),m=s(4064);let p=e=>{let{visible:r,onHide:s,onUnitCreated:p,initialName:v}=e,[h,b]=(0,i.useState)(""),[f,j]=(0,i.useState)(""),[x,g]=(0,i.useState)(!1),[y,N]=(0,i.useState)({}),E=(0,i.useRef)(null),{showToast:k}=(0,m.d)();(0,i.useEffect)(()=>{r&&b(v||"")},[r,v]);let S=async e=>{if(e.preventDefault(),(()=>{let e={};return h.trim()||(e.name="Le nom est requis"),f.trim()||(e.abbreviation="L'abr\xe9viation est requise"),f.length>5&&(e.abbreviation="L'abr\xe9viation ne doit pas d\xe9passer 5 caract\xe8res"),N(e),0===Object.keys(e).length})()){g(!0);try{let e=await (0,o.gS)((0,o.rJ)(d.db,"units"),{name:h.trim(),abbreviation:f.trim(),createdAt:new Date,isActive:!0});p&&p({id:e.id,name:h.trim(),abbreviation:f.trim()}),k({severity:"success",summary:u.g.success.default,detail:u.g.success.create}),b(""),j(""),s()}catch(e){console.error("Error creating unit:",e),k({severity:"error",summary:u.g.error.default,detail:u.g.error.create})}finally{g(!1)}}},C=(0,a.jsxs)("div",{className:"form-actions",children:[(0,a.jsx)(l.$,{type:"submit",label:"Ajouter",icon:"pi pi-check",loading:x,className:"p-button-success",onClick:S}),(0,a.jsx)(l.$,{type:"button",label:"Annuler",icon:"pi pi-times",onClick:s,className:"p-button-text"})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.y,{ref:E}),(0,a.jsx)(c.l,{header:"Ajouter une unit\xe9",visible:r,onHide:s,footer:C,modal:!0,className:"add-unit-dialog",closeOnEscape:!0,dismissableMask:!0,children:(0,a.jsxs)("div",{className:"form-container",children:[(0,a.jsx)("p",{className:"required-field-note",children:"* Champs requis"}),(0,a.jsxs)("div",{className:"form-field",children:[(0,a.jsxs)("label",{htmlFor:"name",children:["Nom ",(0,a.jsx)("span",{className:"required",children:"*"})]}),(0,a.jsxs)("span",{className:"p-input-icon-right",children:[(0,a.jsx)("i",{className:h?"pi pi-check":"pi pi-times",style:{color:h?"var(--green-500)":"var(--red-500)"}}),(0,a.jsx)(t.S,{id:"name",value:h,onChange:e=>{b(e.target.value),N({...y,name:void 0})},placeholder:"Entrez le nom de l'unit\xe9",className:y.name?"p-invalid":""})]}),y.name&&(0,a.jsx)("small",{className:"p-error",children:y.name})]}),(0,a.jsxs)("div",{className:"form-field",children:[(0,a.jsxs)("label",{htmlFor:"abbreviation",children:["Abr\xe9viation ",(0,a.jsx)("span",{className:"required",children:"*"})]}),(0,a.jsxs)("span",{className:"p-input-icon-right",children:[(0,a.jsx)("i",{className:f?"pi pi-check":"pi pi-times",style:{color:f?"var(--green-500)":"var(--red-500)"}}),(0,a.jsx)(t.S,{id:"abbreviation",value:f,onChange:e=>{j(e.target.value),N({...y,abbreviation:void 0})},placeholder:"Entrez l'abr\xe9viation",className:y.abbreviation?"p-invalid":"",maxLength:5})]}),y.abbreviation&&(0,a.jsx)("small",{className:"p-error",children:y.abbreviation})]})]})})]})}}}]);